<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Family Chore Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background: #eee; }
    button { padding: 5px 10px; margin: 2px; border: none; border-radius: 8px; cursor: pointer; background: #4CAF50; color: #fff; }
    button:hover { background: #45a049; }
    .complete { background: #2196F3; }
    .reset { background: #FF9800; }
    .points { font-weight: bold; }
  </style>
</head>
<body>
  <h1>‚ú® Family Chore Dashboard ‚ú®</h1>

  <div style="text-align:center; margin-bottom:20px;">
    <button class="reset" onclick="resetDaily()">üîÑ Reset Daily</button>
    <button class="reset" onclick="resetWeekly()">üìÖ Reset Weekly</button>
  </div>

  <h2>Chore List</h2>
  <table>
    <thead>
      <tr><th>Child</th><th>Task</th><th>Points</th><th>Action</th></tr>
    </thead>
    <tbody id="choreRows"></tbody>
  </table>

  <h2>Points Leaderboard</h2>
  <table>
    <thead>
      <tr><th>Child</th><th>Total Points</th></tr>
    </thead>
    <tbody id="leaderboard"></tbody>
  </table>

<script>
const KIDS = [
  { name: "Aveah", points: 0 },
  { name: "Jaxon", points: 0 },
  { name: "Zander", points: 0 }
];

// Chores config
const CHORES = [
  { child: "Aveah", task: "Make Bed", points: 1, frequency: "daily" },
   { child: "Jaxon", task: "Make Bed", points: 1, frequency: "daily" },
   { child: "Zander", task: "Make Bed", points: 1, frequency: "daily" },
  { child: "Jaxon", task: "Feed Bambi", points: 1, frequency: "daily" },
  { child: "Zander", task: "Feed Violet", points: 1, frequency: "daily" },
  { child: "Jaxon", task: "Take Out Trash", points: 1, frequency: "daily" },
  { claimableBy: ["Jaxon", "Zander"], task: "Clean Bathroom", points: 1, frequency: "weekly" },
  { claimableBy: ["Jaxon", "Zander"], task: "Vacuum Bedroom", points: 1, frequency: "weekly" },
  { child: "Aveah", task: "Vacuum Bedroom", points: 1, frequency: "weekly" },
  { child: "ANY", task: "Clean Bathroom", points: 1, frequency: "weekly" }
];

// Save/load state
let state = JSON.parse(localStorage.getItem("choreState")) || {
  kids: Object.fromEntries(KIDS.map(k => [k.name, 0])),
  completedChores: {}
};
function saveState() {
  localStorage.setItem("choreState", JSON.stringify(state));
}

// Render chores
function renderChores(){
  const tbody = document.getElementById("choreRows");
  tbody.innerHTML = "";

  for(const c of CHORES){
    const key = c.task + "-" + c.frequency;
    if(state.completedChores[key]) continue; // already done

    const tr = document.createElement("tr");
    const freqIcon = c.frequency === "daily" ? "‚òÄÔ∏è" : "üìÖ";

    if(c.claimableBy){ 
      // Claimable by some kids
      let buttons = c.claimableBy.map(k =>
        `<button class="complete" data-child="${k}" data-task="${c.task}" data-p="${c.points}" data-freq="${c.frequency}">
          Claim for ${k} ‚ú®
        </button>`).join(" ");
      tr.innerHTML = `
        <td>${c.claimableBy.join(" / ")}</td>
        <td class="task">üë• ${c.task} ${freqIcon}</td>
        <td>${c.points}</td>
        <td>${buttons}</td>
      `;
    } else if(c.child === "ANY"){
      // Claimable by anyone
      let buttons = KIDS.map(k =>
        `<button class="complete" data-child="${k.name}" data-task="${c.task}" data-p="${c.points}" data-freq="${c.frequency}">
          Claim for ${k.name} ‚ú®
        </button>`).join(" ");
      tr.innerHTML = `
        <td>Any</td>
        <td class="task">‚≠ê ${c.task} ${freqIcon}</td>
        <td>${c.points}</td>
        <td>${buttons}</td>
      `;
    } else {
      // Fixed chore
      tr.innerHTML = `
        <td>${c.child}</td>
        <td class="task">${c.task} ${freqIcon}</td>
        <td>${c.points}</td>
        <td><button class="complete" data-child="${c.child}" data-task="${c.task}" data-p="${c.points}" data-freq="${c.frequency}">
          Complete ‚ú®
        </button></td>
      `;
    }

    tbody.appendChild(tr);
  }

  // Attach click listeners
  tbody.querySelectorAll(".complete").forEach(btn=>{
    btn.addEventListener("click", (e)=>{
      const child = e.currentTarget.dataset.child;
      const task  = e.currentTarget.dataset.task;
      const pts   = Number(e.currentTarget.dataset.p);
      const freq  = e.currentTarget.dataset.freq;

      onCompleteChore({child, task, points: pts, frequency: freq});
      state.completedChores[task+"-"+freq] = true;
      saveState();
    });
  });
}

// Complete chore
function onCompleteChore({child, task, points, frequency}){
  state.kids[child] += points;
  saveState();
  renderChores();
  renderLeaderboard();
}

// Resetters
function resetDaily(){
  for(let key in state.completedChores){
    if(key.endsWith("-daily")) delete state.completedChores[key];
  }
  saveState();
  renderChores();
}
function resetWeekly(){
  for(let key in state.completedChores){
    if(key.endsWith("-weekly")) delete state.completedChores[key];
  }
  saveState();
  renderChores();
}

// Leaderboard
function renderLeaderboard(){
  const tbody = document.getElementById("leaderboard");
  tbody.innerHTML = "";
  for(const kid of KIDS){
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${kid.name}</td><td class="points">${state.kids[kid.name]}</td>`;
    tbody.appendChild(tr);
  }
}

renderChores();
renderLeaderboard();
</script>
</body>
</html>
